<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logut.png"><title>strongking</title><meta name="description" content="strongking博客">
    <link rel="modulepreload" href="/vuepress-java/assets/app.fe102d59.js"><link rel="modulepreload" href="/vuepress-java/assets/Mybatis.html.e794f6f1.js"><link rel="modulepreload" href="/vuepress-java/assets/Mybatis.html.6eaa3150.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.58c13695.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.0ef9893a.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.d2a40853.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.7e230503.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.dff1005a.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.89f2a13b.js"><link rel="prefetch" href="/vuepress-java/assets/Git课程讲义.html.879a5ecc.js"><link rel="prefetch" href="/vuepress-java/assets/Redis基础课程讲义.html.f8cf3fff.js"><link rel="prefetch" href="/vuepress-java/assets/基础篇讲义.html.028c762c.js"><link rel="prefetch" href="/vuepress-java/assets/虚拟机篇讲义.html.373ec939.js"><link rel="prefetch" href="/vuepress-java/assets/并发篇讲义.html.d9e712e0.js"><link rel="prefetch" href="/vuepress-java/assets/框架篇讲义.html.17209f9f.js"><link rel="prefetch" href="/vuepress-java/assets/数据库篇.html.2faba054.js"><link rel="prefetch" href="/vuepress-java/assets/缓存篇讲义.html.9cf7e368.js"><link rel="prefetch" href="/vuepress-java/assets/分布式讲义.html.46f4e374.js"><link rel="prefetch" href="/vuepress-java/assets/EADME.html.5cde76f7.js"><link rel="prefetch" href="/vuepress-java/assets/SpringCloud01.html.fc83a84b.js"><link rel="prefetch" href="/vuepress-java/assets/微服务保护.html.1de66ac9.js"><link rel="prefetch" href="/vuepress-java/assets/分布式事务.html.5b173621.js"><link rel="prefetch" href="/vuepress-java/assets/Docker实用篇.html.d5bfe35f.js"><link rel="prefetch" href="/vuepress-java/assets/分布式缓存.html.5f46033d.js"><link rel="prefetch" href="/vuepress-java/assets/RabbitMQ.html.14f02718.js"><link rel="prefetch" href="/vuepress-java/assets/多级缓存.html.1ff7b080.js"><link rel="prefetch" href="/vuepress-java/assets/RabbitMQ-高级篇.html.8aee4216.js"><link rel="prefetch" href="/vuepress-java/assets/Linux-Day01.html.60edf774.js"><link rel="prefetch" href="/vuepress-java/assets/Linux-Day02.html.498d5ffb.js"><link rel="prefetch" href="/vuepress-java/assets/Vmware虚拟机问题解决方案.html.5f6f36af.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day01.html.34dc44b9.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day02.html.e4378770.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day03.html.eb870fc0.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day01.html.a39cfbd7.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day02.html.a560b5b2.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day03.html.aab72058.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day04.html.95344022.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-第五天.html.bf4c2590.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-第六天.html.4a07be12.js"><link rel="prefetch" href="/vuepress-java/assets/mysql基础.html.f6ee5789.js"><link rel="prefetch" href="/vuepress-java/assets/mysql高级.html.e0e86232.js"><link rel="prefetch" href="/vuepress-java/assets/JDBC.html.587e6170.js"><link rel="prefetch" href="/vuepress-java/assets/HTML_CSS.html.1acf784d.js"><link rel="prefetch" href="/vuepress-java/assets/JavaScript.html.72e632c8.js"><link rel="prefetch" href="/vuepress-java/assets/HTTP_Tomcat_Servlet.html.ff09d6a5.js"><link rel="prefetch" href="/vuepress-java/assets/Request_Response.html.ce8099d4.js"><link rel="prefetch" href="/vuepress-java/assets/JSP.html.2e5e7f75.js"><link rel="prefetch" href="/vuepress-java/assets/Filter_Listener_Ajax.html.51ea1ed8.js"><link rel="prefetch" href="/vuepress-java/assets/SpringCloud实用篇02.html.4382200f.js"><link rel="prefetch" href="/vuepress-java/assets/day01-项目介绍以及实现登录功能.html.819c6109.js"><link rel="prefetch" href="/vuepress-java/assets/day02-完善个人信息与MongoDB入门.html.9258a082.js"><link rel="prefetch" href="/vuepress-java/assets/day03-今日佳人功能实现.html.34e74aea.js"><link rel="prefetch" href="/vuepress-java/assets/day04-圈子功能实现.html.1729fde6.js"><link rel="prefetch" href="/vuepress-java/assets/day05-圈子、小视频功能实现.html.889780f1.js"><link rel="prefetch" href="/vuepress-java/assets/day06-完善小视频功能以及即时通讯.html.49d85a44.js"><link rel="prefetch" href="/vuepress-java/assets/day07-完善消息功能以及个人主页.html.62de9965.js"><link rel="prefetch" href="/vuepress-java/assets/day08-搜附近以及探花功能实现.html.00cb6e1d.js"><link rel="prefetch" href="/vuepress-java/assets/day09-我的功能实现.html.f626a64b.js"><link rel="prefetch" href="/vuepress-java/assets/day10-实现推荐功能.html.18f97898.js"><link rel="prefetch" href="/vuepress-java/assets/day02-分类和static.html.d516863f.js"><link rel="prefetch" href="/vuepress-java/assets/day03-继承.html.86897a52.js"><link rel="prefetch" href="/vuepress-java/assets/day04-接口和内部类.html.c2736fc5.js"><link rel="prefetch" href="/vuepress-java/assets/day05-常用API01.html.6ecedb9d.js"><link rel="prefetch" href="/vuepress-java/assets/day06-常用API02.html.2ddc942a.js"><link rel="prefetch" href="/vuepress-java/assets/day07集合01.html.a3ee5f56.js"><link rel="prefetch" href="/vuepress-java/assets/day08集合02.html.b5d501ee.js"><link rel="prefetch" href="/vuepress-java/assets/day09集合03.html.08d43cf0.js"><link rel="prefetch" href="/vuepress-java/assets/day10IO流01.html.f4d87ac3.js"><link rel="prefetch" href="/vuepress-java/assets/day11IO流02.html.3b6d400d.js"><link rel="prefetch" href="/vuepress-java/assets/day12-多线程01.html.25ea7383.js"><link rel="prefetch" href="/vuepress-java/assets/day12 多线程02.html.4b225d57.js"><link rel="prefetch" href="/vuepress-java/assets/day14-网络编程.html.b217db0f.js"><link rel="prefetch" href="/vuepress-java/assets/day16-基础加强01.html.abf7fad0.js"><link rel="prefetch" href="/vuepress-java/assets/day17-基础加强02.html.4806f20a.js"><link rel="prefetch" href="/vuepress-java/assets/day18-基础加强03.html.9615e037.js"><link rel="prefetch" href="/vuepress-java/assets/day07 面向对象.html.e99b9ad2.js"><link rel="prefetch" href="/vuepress-java/assets/day08 常用API.html.25bcd08c.js"><link rel="prefetch" href="/vuepress-java/assets/day09 ArrayList_学生管理系统.html.60f09897.js"><link rel="prefetch" href="/vuepress-java/assets/day01Git.html.47aa810c.js"><link rel="prefetch" href="/vuepress-java/assets/day01-java基础语法.html.4bb04028.js"><link rel="prefetch" href="/vuepress-java/assets/day02-Java基础语法.html.a0e54849.js"><link rel="prefetch" href="/vuepress-java/assets/day03 switch_循环语句.html.fc7ce87f.js"><link rel="prefetch" href="/vuepress-java/assets/day04 IDEA_数组.html.bdcb893b.js"><link rel="prefetch" href="/vuepress-java/assets/day05 方法.html.ced2a258.js"><link rel="prefetch" href="/vuepress-java/assets/day06 Debug_基础练习.html.bbb54b26.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第一天.html.9af90a81.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第二天.html.0f1f6ac5.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第三天.html.7a80cad2.js"><link rel="prefetch" href="/vuepress-java/assets/SpringBoot笔记.html.41b58db7.js"><link rel="prefetch" href="/vuepress-java/assets/MyBatisPlus笔记.html.224f3763.js"><link rel="prefetch" href="/vuepress-java/assets/Maven进阶笔记.html.67f9d23c.js"><link rel="prefetch" href="/vuepress-java/assets/SpringMVC第一天.html.807d7335.js"><link rel="prefetch" href="/vuepress-java/assets/SpringMVC第二天.html.deff038b.js"><link rel="prefetch" href="/vuepress-java/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.2e952d1e.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.b43ce151.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.d21a8f93.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.e9e1b667.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.464faaa3.js"><link rel="prefetch" href="/vuepress-java/assets/index.html.5c2a1dcb.js"><link rel="prefetch" href="/vuepress-java/assets/Git课程讲义.html.9d23767f.js"><link rel="prefetch" href="/vuepress-java/assets/Redis基础课程讲义.html.afee3b5d.js"><link rel="prefetch" href="/vuepress-java/assets/基础篇讲义.html.d60110bd.js"><link rel="prefetch" href="/vuepress-java/assets/虚拟机篇讲义.html.4aa994c2.js"><link rel="prefetch" href="/vuepress-java/assets/并发篇讲义.html.9297c140.js"><link rel="prefetch" href="/vuepress-java/assets/框架篇讲义.html.b6cea17f.js"><link rel="prefetch" href="/vuepress-java/assets/数据库篇.html.14ffb57e.js"><link rel="prefetch" href="/vuepress-java/assets/缓存篇讲义.html.c0a52230.js"><link rel="prefetch" href="/vuepress-java/assets/分布式讲义.html.6e23b45b.js"><link rel="prefetch" href="/vuepress-java/assets/EADME.html.e09ea151.js"><link rel="prefetch" href="/vuepress-java/assets/SpringCloud01.html.cfd89b1c.js"><link rel="prefetch" href="/vuepress-java/assets/微服务保护.html.54540bde.js"><link rel="prefetch" href="/vuepress-java/assets/分布式事务.html.558dd94f.js"><link rel="prefetch" href="/vuepress-java/assets/Docker实用篇.html.b2026a5c.js"><link rel="prefetch" href="/vuepress-java/assets/分布式缓存.html.ba65b71f.js"><link rel="prefetch" href="/vuepress-java/assets/RabbitMQ.html.000fe1dd.js"><link rel="prefetch" href="/vuepress-java/assets/多级缓存.html.d37dc5fe.js"><link rel="prefetch" href="/vuepress-java/assets/RabbitMQ-高级篇.html.91287f71.js"><link rel="prefetch" href="/vuepress-java/assets/Linux-Day01.html.671d82b0.js"><link rel="prefetch" href="/vuepress-java/assets/Linux-Day02.html.bdc9818b.js"><link rel="prefetch" href="/vuepress-java/assets/Vmware虚拟机问题解决方案.html.b2f92101.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day01.html.cd77af95.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day02.html.de40f548.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖项目优化-Day03.html.fb804c42.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day01.html.0f5ccb54.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day02.html.7fb83c91.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day03.html.dce71bf7.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-Day04.html.deded7dc.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-第五天.html.0328fdf4.js"><link rel="prefetch" href="/vuepress-java/assets/瑞吉外卖-第六天.html.5163a8f7.js"><link rel="prefetch" href="/vuepress-java/assets/mysql基础.html.e1417330.js"><link rel="prefetch" href="/vuepress-java/assets/mysql高级.html.7d3960a1.js"><link rel="prefetch" href="/vuepress-java/assets/JDBC.html.68826e5e.js"><link rel="prefetch" href="/vuepress-java/assets/HTML_CSS.html.79f758d4.js"><link rel="prefetch" href="/vuepress-java/assets/JavaScript.html.7fe5d02c.js"><link rel="prefetch" href="/vuepress-java/assets/HTTP_Tomcat_Servlet.html.e9745c27.js"><link rel="prefetch" href="/vuepress-java/assets/Request_Response.html.786bbeb6.js"><link rel="prefetch" href="/vuepress-java/assets/JSP.html.26c1d548.js"><link rel="prefetch" href="/vuepress-java/assets/Filter_Listener_Ajax.html.bec26595.js"><link rel="prefetch" href="/vuepress-java/assets/SpringCloud实用篇02.html.02dcbca6.js"><link rel="prefetch" href="/vuepress-java/assets/day01-项目介绍以及实现登录功能.html.d36c4aff.js"><link rel="prefetch" href="/vuepress-java/assets/day02-完善个人信息与MongoDB入门.html.a860e3d5.js"><link rel="prefetch" href="/vuepress-java/assets/day03-今日佳人功能实现.html.48a5a198.js"><link rel="prefetch" href="/vuepress-java/assets/day04-圈子功能实现.html.ac8a1069.js"><link rel="prefetch" href="/vuepress-java/assets/day05-圈子、小视频功能实现.html.df501238.js"><link rel="prefetch" href="/vuepress-java/assets/day06-完善小视频功能以及即时通讯.html.77430b95.js"><link rel="prefetch" href="/vuepress-java/assets/day07-完善消息功能以及个人主页.html.253de935.js"><link rel="prefetch" href="/vuepress-java/assets/day08-搜附近以及探花功能实现.html.d7f08d03.js"><link rel="prefetch" href="/vuepress-java/assets/day09-我的功能实现.html.393e2aee.js"><link rel="prefetch" href="/vuepress-java/assets/day10-实现推荐功能.html.b1f996ca.js"><link rel="prefetch" href="/vuepress-java/assets/day02-分类和static.html.319a8a19.js"><link rel="prefetch" href="/vuepress-java/assets/day03-继承.html.6056abb0.js"><link rel="prefetch" href="/vuepress-java/assets/day04-接口和内部类.html.b17a070b.js"><link rel="prefetch" href="/vuepress-java/assets/day05-常用API01.html.1846a16d.js"><link rel="prefetch" href="/vuepress-java/assets/day06-常用API02.html.ffe5e41a.js"><link rel="prefetch" href="/vuepress-java/assets/day07集合01.html.4ec97399.js"><link rel="prefetch" href="/vuepress-java/assets/day08集合02.html.41521b31.js"><link rel="prefetch" href="/vuepress-java/assets/day09集合03.html.34be9b8b.js"><link rel="prefetch" href="/vuepress-java/assets/day10IO流01.html.7b4e117e.js"><link rel="prefetch" href="/vuepress-java/assets/day11IO流02.html.57677726.js"><link rel="prefetch" href="/vuepress-java/assets/day12-多线程01.html.9d08c05c.js"><link rel="prefetch" href="/vuepress-java/assets/day12 多线程02.html.7fd75d7f.js"><link rel="prefetch" href="/vuepress-java/assets/day14-网络编程.html.7f5fe14f.js"><link rel="prefetch" href="/vuepress-java/assets/day16-基础加强01.html.03974441.js"><link rel="prefetch" href="/vuepress-java/assets/day17-基础加强02.html.485906ec.js"><link rel="prefetch" href="/vuepress-java/assets/day18-基础加强03.html.8564d04c.js"><link rel="prefetch" href="/vuepress-java/assets/day07 面向对象.html.a545a9ae.js"><link rel="prefetch" href="/vuepress-java/assets/day08 常用API.html.dff9379d.js"><link rel="prefetch" href="/vuepress-java/assets/day09 ArrayList_学生管理系统.html.9df73825.js"><link rel="prefetch" href="/vuepress-java/assets/day01Git.html.935ed303.js"><link rel="prefetch" href="/vuepress-java/assets/day01-java基础语法.html.1ec55268.js"><link rel="prefetch" href="/vuepress-java/assets/day02-Java基础语法.html.46754d80.js"><link rel="prefetch" href="/vuepress-java/assets/day03 switch_循环语句.html.180d06c7.js"><link rel="prefetch" href="/vuepress-java/assets/day04 IDEA_数组.html.ba790a8c.js"><link rel="prefetch" href="/vuepress-java/assets/day05 方法.html.7cb9e45a.js"><link rel="prefetch" href="/vuepress-java/assets/day06 Debug_基础练习.html.f3d0ecb2.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第一天.html.ff02c7af.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第二天.html.fb2566a8.js"><link rel="prefetch" href="/vuepress-java/assets/Spring第三天.html.9fece87d.js"><link rel="prefetch" href="/vuepress-java/assets/SpringBoot笔记.html.5ae586f5.js"><link rel="prefetch" href="/vuepress-java/assets/MyBatisPlus笔记.html.bd90583a.js"><link rel="prefetch" href="/vuepress-java/assets/Maven进阶笔记.html.fa9b5853.js"><link rel="prefetch" href="/vuepress-java/assets/SpringMVC第一天.html.48095d1e.js"><link rel="prefetch" href="/vuepress-java/assets/SpringMVC第二天.html.6591057e.js"><link rel="prefetch" href="/vuepress-java/assets/404.html.b47bbce9.js">
    <link rel="stylesheet" href="/vuepress-java/assets/style.4362bf7c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-java/" class=""><img class="logo" src="/vuepress-java/images/logut.png" alt="strongking"><span class="site-name can-hide">strongking</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vuepress-java/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/java/" class="router-link-active" aria-label="java"><!--[--><!--]--> java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/interview/" class="" aria-label="java面试"><!--[--><!--]--> java面试 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/gitredis/" class="" aria-label="GitRedis"><!--[--><!--]--> GitRedis <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/java8-9/" class="" aria-label="java分布式"><!--[--><!--]--> java分布式 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vuepress-java/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/java/" class="router-link-active" aria-label="java"><!--[--><!--]--> java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/interview/" class="" aria-label="java面试"><!--[--><!--]--> java面试 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/gitredis/" class="" aria-label="GitRedis"><!--[--><!--]--> GitRedis <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vuepress-java/java8-9/" class="" aria-label="java分布式"><!--[--><!--]--> java分布式 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/vuepress-java/java/01-02java/" class="sidebar-item sidebar-heading" aria-label="java"><!--[--><!--]--> java <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">java基础 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/Java1/day01_Java/笔记/day01-java基础语法.md" class="sidebar-item" aria-label="java基础语法"><!--[--><!--]--> java基础语法 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/Java1/day02_运算符/笔记/day02-Java基础语法.md" class="sidebar-item" aria-label="java基础语法2"><!--[--><!--]--> java基础语法2 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/Java1/day03_循环/讲义-md版本/day03 switch&amp;循环语句.md" class="sidebar-item" aria-label="switch&amp;循环语句"><!--[--><!--]--> switch&amp;循环语句 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/Java1/day04_IDEA和数组/讲义-md版本/day04 IDEA&amp;数组.md" class="sidebar-item" aria-label="IDEA&amp;数组"><!--[--><!--]--> IDEA&amp;数组 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/Java1/day05_方法/讲义-md版本/day05 方法.md" class="sidebar-item" aria-label="方法"><!--[--><!--]--> 方法 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/Java1/day06_Debug&amp;进制&amp;二维数组/讲义-md版本/day06 Debug&amp;基础练习.md" class="sidebar-item" aria-label="Debug&amp;基础练习"><!--[--><!--]--> Debug&amp;基础练习 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/2.面向对象基础/day07_面向对象基础/讲义-md版本/day07 面向对象.md" class="sidebar-item" aria-label="面向对象基础"><!--[--><!--]--> 面向对象基础 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/3.API基础/day08_常用API/讲义-md版本/day08 常用API.md" class="sidebar-item" aria-label="API基础"><!--[--><!--]--> API基础 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/4.集合基础/day09_学生管理系统/讲义-md版本/day09 ArrayList&amp;学生管理系统.md" class="sidebar-item" aria-label="集合基础"><!--[--><!--]--> 集合基础 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/5.Git/day10_Git/笔记/day01Git.md" class="sidebar-item" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/06.面向对象进阶/day11_分类和static/笔记/day02-分类和static.md" class="sidebar-item" aria-label="面向对象进阶"><!--[--><!--]--> 面向对象进阶 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/06.面向对象进阶/day11_分类和static/笔记/day02-分类和static.md" class="sidebar-item" aria-label="分类和static"><!--[--><!--]--> 分类和static <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/06.面向对象进阶/day12_继承/笔记/day03-继承.md" class="sidebar-item" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/06.面向对象进阶/day13_接口和内部类/笔记/day04-接口和内部类.md" class="sidebar-item" aria-label="接口和内部类"><!--[--><!--]--> 接口和内部类 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/07.常用API&amp;异常/day05-APIday01/笔记/day05-常用API01.md" class="sidebar-item" aria-label="常用API&amp;异常"><!--[--><!--]--> 常用API&amp;异常 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/07.常用API&amp;异常/day05-APIday01/笔记/day05-常用API01.md" class="sidebar-item" aria-label="常用API&amp;异常"><!--[--><!--]--> 常用API&amp;异常 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/07.常用API&amp;异常/day06-APIday02/笔记/day06-常用API02.md" class="sidebar-item" aria-label="常用API&amp;异常"><!--[--><!--]--> 常用API&amp;异常 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/08.集合/day16_集合01/笔记/day07集合01.md" class="sidebar-item" aria-label="集合"><!--[--><!--]--> 集合 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/08.集合/day16_集合01/笔记/day07集合01.md" class="sidebar-item" aria-label="集合1"><!--[--><!--]--> 集合1 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/08.集合/day17_集合02/笔记/day08集合02.md" class="sidebar-item" aria-label="集合2"><!--[--><!--]--> 集合2 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/08.集合/day18_集合03/笔记/day09集合03.md" class="sidebar-item" aria-label="集合2"><!--[--><!--]--> 集合2 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/09.IO流/day11-IO流day01/笔记/day10IO流01.md" class="sidebar-item" aria-label="IO流"><!--[--><!--]--> IO流 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/09.IO流/day11-IO流day01/笔记/day10IO流01.md" class="sidebar-item" aria-label="IO流"><!--[--><!--]--> IO流 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/09.IO流/day12-IO流day02/笔记/day11IO流02.md" class="sidebar-item" aria-label="IO流"><!--[--><!--]--> IO流 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/10.多线程/day13-多线程day01/笔记/day12-多线程01.md" class="sidebar-item" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/10.多线程/day13-多线程day01/笔记/day12-多线程01.md" class="sidebar-item" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/10.多线程/day14-多线程day02/笔记/day12 多线程02.md" class="sidebar-item" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/01-02java/11.网络编程/day15-网络编程day01/笔记/day14-网络编程.md" class="sidebar-item" aria-label="网络编程"><!--[--><!--]--> 网络编程 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/12.基础加强/day25-基础加强01/笔记/day16-基础加强01.md" class="sidebar-item" aria-label="基础加强"><!--[--><!--]--> 基础加强 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/01-02java/12.基础加强/day25-基础加强01/笔记/day16-基础加强01.md" class="sidebar-item" aria-label="基础加强"><!--[--><!--]--> 基础加强 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/12.基础加强/day26-基础加强02/笔记/day17-基础加强02.md" class="sidebar-item" aria-label="基础加强"><!--[--><!--]--> 基础加强 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/01-02java/12.基础加强/day27_基础加强03/笔记/day18-基础加强03.md" class="sidebar-item" aria-label="基础加强"><!--[--><!--]--> 基础加强 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/vuepress-java/java/java-03/day01/讲义/mysql基础.md" class="sidebar-item sidebar-heading active" aria-label="java3"><!--[--><!--]--> java3 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/java-03/day01/讲义/mysql基础.md" class="sidebar-item" aria-label="mysql基础"><!--[--><!--]--> mysql基础 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day02/讲义/mysql高级.md" class="sidebar-item" aria-label="mysql高级"><!--[--><!--]--> mysql高级 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day03-JDBC/讲义/JDBC.md" class="sidebar-item" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day05-Mybatis/讲义/Mybatis.md" class="sidebar-item active" aria-label="Mybatis"><!--[--><!--]--> Mybatis <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day06-HTML&amp;CSS/讲义/HTML&amp;CSS.md" class="sidebar-item" aria-label="HTML&amp;CSS"><!--[--><!--]--> HTML&amp;CSS <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day07-JavaScript/讲义/JavaScript.md" class="sidebar-item" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day08-HTTP&amp;Tomcat&amp;Servlet/讲义/HTTP&amp;Tomcat&amp;Servlet.md" class="sidebar-item" aria-label="HTTP&amp;Tomcat&amp;Servlet"><!--[--><!--]--> HTTP&amp;Tomcat&amp;Servlet <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day09/讲义/Request&amp;Response.md" class="sidebar-item" aria-label="Request&amp;Response"><!--[--><!--]--> Request&amp;Response <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day10-JSP/讲义/JSP.md" class="sidebar-item" aria-label="JSP"><!--[--><!--]--> JSP <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-03/day12-Filter&amp;Listener&amp;AJAX/讲义/Filter&amp;Listener&amp;Ajax.md" class="sidebar-item" aria-label="Filter&amp;Listener&amp;Ajax"><!--[--><!--]--> Filter&amp;Listener&amp;Ajax <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/vuepress-java/java/java-04/1-spring/day01/讲义/Spring第一天,md" class="sidebar-item sidebar-heading" aria-label="java4"><!--[--><!--]--> java4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress-java/java/java-04/1-spring/day01/讲义/Spring第一天.md" class="sidebar-item" aria-label="spring1"><!--[--><!--]--> spring1 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/1-spring/day02/讲义/Spring第二天.md" class="sidebar-item" aria-label="spring2"><!--[--><!--]--> spring2 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/1-spring/day03/讲义/Spring第三天.md" class="sidebar-item" aria-label="spring3"><!--[--><!--]--> spring3 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/2-springmvc/day01/讲义/SpringMVC第一天.md" class="sidebar-item" aria-label="SpringMVC第一天"><!--[--><!--]--> SpringMVC第一天 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/2-springmvc/day02/讲义/SpringMVC第二天.md" class="sidebar-item" aria-label="SpringMVC第二天"><!--[--><!--]--> SpringMVC第二天 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/3-springboot/day01/讲义/SpringBoot笔记.md" class="sidebar-item" aria-label="SpringBoot笔记"><!--[--><!--]--> SpringBoot笔记 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/4-mybatisplus/day01/讲义/MyBatisPlus笔记.md" class="sidebar-item" aria-label="MyBatisPlus笔记"><!--[--><!--]--> MyBatisPlus笔记 <!--[--><!--]--></a><!----></li><li><a href="/vuepress-java/java/java-04/5-maven/day01/讲义/Maven进阶笔记.md" class="sidebar-item" aria-label="Maven进阶笔记"><!--[--><!--]--> Maven进阶笔记 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="mybatis练习" tabindex="-1"><a class="header-anchor" href="#mybatis练习" aria-hidden="true">#</a> Mybatis练习</h2><p><strong>目标</strong></p><blockquote><ul><li>能够使用映射配置文件实现CRUD操作</li><li>能够使用注解实现CRUD操作</li></ul></blockquote><h2 id="_1-配置文件实现crud" tabindex="-1"><a class="header-anchor" href="#_1-配置文件实现crud" aria-hidden="true">#</a> 1，配置文件实现CRUD</h2><p><img src="/vuepress-java/assets/image-20210729111159534.fdb591ab.png" alt="image-20210729111159534"></p><p>如上图所示产品原型，里面包含了品牌数据的 <code>查询</code> 、<code>按条件查询</code>、<code>添加</code>、<code>删除</code>、<code>批量删除</code>、<code>修改</code> 等功能，而这些功能其实就是对数据库表中的数据进行CRUD操作。接下来我们就使用Mybatis完成品牌数据的增删改查操作。以下是我们要完成功能列表：</p><blockquote><ul><li>查询 <ul><li>查询所有数据</li><li>查询详情</li><li>条件查询</li></ul></li><li>添加</li><li>修改 <ul><li>修改全部字段</li><li>修改动态字段</li></ul></li><li>删除 <ul><li>删除一个</li><li>批量删除</li></ul></li></ul></blockquote><p>我们先将必要的环境准备一下。</p><h3 id="_1-1-环境准备" tabindex="-1"><a class="header-anchor" href="#_1-1-环境准备" aria-hidden="true">#</a> 1.1 环境准备</h3><ul><li><p>数据库表（tb_brand）及数据准备</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 删除tb_brand表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> tb_brand<span class="token punctuation">;</span>
<span class="token comment">-- 创建tb_brand表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb_brand
<span class="token punctuation">(</span>
    <span class="token comment">-- id 主键</span>
    id           <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    <span class="token comment">-- 品牌名称</span>
    brand_name   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 企业名称</span>
    company_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 排序字段</span>
    ordered      <span class="token keyword">int</span><span class="token punctuation">,</span>
    <span class="token comment">-- 描述信息</span>
    description  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 状态：0：禁用  1：启用</span>
    <span class="token keyword">status</span>       <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_brand <span class="token punctuation">(</span>brand_name<span class="token punctuation">,</span> company_name<span class="token punctuation">,</span> ordered<span class="token punctuation">,</span> description<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;三只松鼠&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;三只松鼠股份有限公司&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;好吃不上火&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;华为&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;华为技术有限公司&#39;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&#39;华为致力于把数字世界带入每个人、每个家庭、每个组织，构建万物互联的智能世界&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">&#39;小米&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;小米科技有限公司&#39;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">&#39;are you ok&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>实体类 Brand</p><p>在 <code>com.itheima.pojo</code> 包下创建 Brand 实体类。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Brand</span> <span class="token punctuation">{</span>
    <span class="token comment">// id 主键</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token comment">// 品牌名称</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> brandName<span class="token punctuation">;</span>
    <span class="token comment">// 企业名称</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> companyName<span class="token punctuation">;</span>
    <span class="token comment">// 排序字段</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> ordered<span class="token punctuation">;</span>
    <span class="token comment">// 描述信息</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
    <span class="token comment">// 状态：0：禁用  1：启用</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>
    
    <span class="token comment">//省略 setter and getter。自己写时要补全这部分代码</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>编写测试用例</p><p>测试代码需要在 <code>test/java</code> 目录下创建包及测试用例。项目结构如下：</p><img src="/vuepress-java/assets/image-20210729112907106.1c9ecc27.png" alt="image-20210729112907106" style="zoom:80%;"></li><li><p>安装 MyBatisX 插件</p><ul><li><p>MybatisX 是一款基于 IDEA 的快速开发插件，为效率而生。</p></li><li><p>主要功能</p><ul><li>XML映射配置文件 和 接口方法 间相互跳转</li><li>根据接口方法生成 statement</li></ul></li><li><p>安装方式</p><p>点击 <code>file</code> ，选择 <code>settings</code> ，就能看到如下图所示界面</p><img src="/vuepress-java/assets/image-20210729113304743.80316efd.png" alt="image-20210729113304743" style="zoom:80%;"><blockquote><p>注意：安装完毕后需要重启IDEA</p></blockquote></li><li><p>插件效果</p><img src="/vuepress-java/assets/image-20210729164450524.2d1dbd12.png" alt="image-20210729164450524" style="zoom:70%;"><p>红色头绳的表示映射配置文件，蓝色头绳的表示mapper接口。在mapper接口点击红色头绳的小鸟图标会自动跳转到对应的映射配置文件，在映射配置文件中点击蓝色头绳的小鸟图标会自动跳转到对应的mapper接口。也可以在mapper接口中定义方法，自动生成映射配置文件中的 <code>statement</code> ，如图所示</p><p><img src="/vuepress-java/assets/image-20210729165337223.7e7594a3.png" alt="image-20210729165337223"></p></li></ul></li></ul><h3 id="_1-2-查询所有数据" tabindex="-1"><a class="header-anchor" href="#_1-2-查询所有数据" aria-hidden="true">#</a> 1.2 查询所有数据</h3><img src="/vuepress-java/assets/image-20210729165724838.007a4efe.png" alt="image-20210729165724838" style="zoom:80%;"><p>如上图所示就页面上展示的数据，而这些数据需要从数据库进行查询。接下来我们就来讲查询所有数据功能，而实现该功能我们分以下步骤进行实现：</p><ul><li><p>编写接口方法：Mapper接口</p><ul><li><p>参数：无</p><p>查询所有数据功能是不需要根据任何条件进行查询的，所以此方法不需要参数。</p><img src="data:image/png;base64,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" alt="image-20210729171208737" style="zoom:80%;"></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token operator">*</span> 结果：<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span>

    我们会将查询出来的每一条数据封装成一个 `<span class="token class-name">Brand</span>` 对象，而多条数据封装多个 `<span class="token class-name">Brand</span>` 对象，需要将这些对象封装到<span class="token class-name">List</span>集合中返回。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&lt;img src=&quot;./assets/image-20210729171146911.png&quot; alt=&quot;image-20210729171146911&quot; style=&quot;zoom:80%;&quot; /&gt;
</code></pre><ul><li>执行方法、测试</li></ul><h4 id="_1-2-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-2-1-编写接口方法" aria-hidden="true">#</a> 1.2.1 编写接口方法</h4><p>在 <code>com.itheima.mapper</code> 包写创建名为 <code>BrandMapper</code> 的接口。并在该接口中定义 <code>List&lt;Brand&gt; selectAll()</code> 方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandMapper</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 查询所有
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-2-2-编写sql语句" aria-hidden="true">#</a> 1.2.2 编写SQL语句</h4><p>在 <code>reources</code> 下创建 <code>com/itheima/mapper</code> 目录结构，并在该目录下创建名为 <code>BrandMapper.xml</code> 的映射配置文件</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.mapper.BrandMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select *
        from tb_brand;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-2-3-编写测试方法" aria-hidden="true">#</a> 1.2.3 编写测试方法</h4><p>在 <code>MybatisTest</code> 类中编写测试查询所有的方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：现在我们感觉测试这部分代码写起来特别麻烦，我们可以先忍忍。以后我们只会写上面的第3步的代码，其他的都不需要我们来完成。</p></blockquote><p>执行测试方法结果如下：</p><p><img src="/vuepress-java/assets/image-20210729172544230.36c85684.png" alt="image-20210729172544230"></p><p>从上面结果我们看到了问题，有些数据封装成功了，而有些数据并没有封装成功。为什么这样呢？</p><p>这个问题可以通过两种方式进行解决：</p><ul><li>给字段起别名</li><li>使用resultMap定义字段和属性的映射关系</li></ul><h4 id="_1-2-4-起别名解决上述问题" tabindex="-1"><a class="header-anchor" href="#_1-2-4-起别名解决上述问题" aria-hidden="true">#</a> 1.2.4 起别名解决上述问题</h4><p>从上面结果可以看到 <code>brandName</code> 和 <code>companyName</code> 这两个属性的数据没有封装成功，查询 实体类 和 表中的字段 发现，在实体类中属性名是 <code>brandName</code> 和 <code>companyName</code> ，而表中的字段名为 <code>brand_name</code> 和 <code>company_name</code>，如下图所示 。那么我们只需要保持这两部分的名称一致这个问题就迎刃而解。</p><img src="/vuepress-java/assets/image-20210729173210433.60c52a0c.png" alt="image-20210729173210433" style="zoom:80%;"><p>我们可以在写sql语句时给这两个字段起别名，将别名定义成和属性名一致即可。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select
    id, brand_name as brandName, company_name as companyName, ordered, description, status
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而上面的SQL语句中的字段列表书写麻烦，如果表中还有更多的字段，同时其他的功能也需要查询这些字段时就显得我们的代码不够精炼。Mybatis提供了<code>sql</code> 片段可以提高sql的复用性。</p><p><strong>SQL片段：</strong></p><ul><li><p>将需要复用的SQL片段抽取到 <code>sql</code> 标签中</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	id, brand_name as brandName, company_name as companyName, ordered, description, status
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>id属性值是唯一标识，引用时也是通过该值进行引用。</p></li><li><p>在原sql语句中进行引用</p><p>使用 <code>include</code> 标签引用上述的 SQL 片段，而 <code>refid</code> 指定上述 SQL 片段的id值。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_column<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_1-2-5-使用resultmap解决上述问题" tabindex="-1"><a class="header-anchor" href="#_1-2-5-使用resultmap解决上述问题" aria-hidden="true">#</a> 1.2.5 使用resultMap解决上述问题</h4><p>起别名 + sql片段的方式可以解决上述问题，但是它也存在问题。如果还有功能只需要查询部分字段，而不是查询所有字段，那么我们就需要再定义一个 SQL 片段，这就显得不是那么灵活。</p><p>那么我们也可以使用resultMap来定义字段和属性的映射关系的方式解决上述问题。</p><ul><li><p>在映射配置文件中使用resultMap定义 字段 和 属性 的映射关系</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
            id：完成主键字段的映射
                column：表的列名
                property：实体类的属性名
            result：完成一般字段的映射
                column：表的列名
                property：实体类的属性名
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>company_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：在上面只需要定义 字段名 和 属性名 不一样的映射，而一样的则不需要专门定义出来。</p></blockquote></li><li><p>SQL语句正常编写</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_1-2-6-小结" tabindex="-1"><a class="header-anchor" href="#_1-2-6-小结" aria-hidden="true">#</a> 1.2.6 小结</h4><p>实体类属性名 和 数据库表列名 不一致，不能自动封装数据</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">*</span> <span class="token operator">==</span>起别名：<span class="token operator">==</span>在<span class="token constant">SQL</span>语句中，对不一样的列名起别名，别名和实体类属性名一样
  <span class="token operator">*</span> 可以定义 <span class="token operator">&lt;</span>sql<span class="token operator">&gt;</span>片段，提升复用性 
<span class="token operator">*</span> <span class="token operator">==</span>resultMap：<span class="token operator">==</span>定义<span class="token operator">&lt;</span>resultMap<span class="token operator">&gt;</span> 完成不一致的属性名和列名的映射

而我们最终选择使用 resultMap的方式。查询映射配置文件中查询所有的 statement 书写如下：
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--
            id：完成主键字段的映射
                column：表的列名
                property：实体类的属性名
            result：完成一般字段的映射
                column：表的列名
                property：实体类的属性名
        --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>company_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-查询详情" tabindex="-1"><a class="header-anchor" href="#_1-3-查询详情" aria-hidden="true">#</a> 1.3 查询详情</h3><img src="/vuepress-java/assets/image-20210729180118287.948e574e.png" alt="image-20210729180118287" style="zoom:80%;"><p>有些数据的属性比较多，在页面表格中无法全部实现，而只会显示部分，而其他属性数据的查询可以通过 <code>查看详情</code> 来进行查询，如上图所示。</p><p>查看详情功能实现步骤：</p><ul><li><p>编写接口方法：Mapper接口</p><img src="data:image/png;base64,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" alt="image-20210729180604529" style="zoom:80%;"><ul><li><p>参数：id</p><p>查看详情就是查询某一行数据，所以需要根据id进行查询。而id以后是由页面传递过来。</p></li><li><p>结果：Brand</p><p>根据id查询出来的数据只要一条，而将一条数据封装成一个Brand对象即可</p></li></ul></li><li><p>编写SQL语句：SQL映射文件</p><img src="/vuepress-java/assets/image-20210729180709318.33d93cd7.png" alt="image-20210729180709318" style="zoom:80%;"></li><li><p>执行方法、进行测试</p></li></ul><h4 id="_1-3-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-3-1-编写接口方法" aria-hidden="true">#</a> 1.3.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义根据id查询数据的方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * 查看详情：根据Id查询
  */</span>
<span class="token class-name">Brand</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-3-2-编写sql语句" aria-hidden="true">#</a> 1.3.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：上述SQL中的 #{id}先这样写，一会我们再详细讲解</p></blockquote><h4 id="_1-3-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-3-3-编写测试方法" aria-hidden="true">#</a> 1.3.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数，该id以后需要传递过来</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行测试方法结果如下：</p><img src="/vuepress-java/assets/image-20210729182223137.8d17dc78.png" alt="image-20210729182223137" style="zoom:70%;"><h4 id="_1-3-4-参数占位符" tabindex="-1"><a class="header-anchor" href="#_1-3-4-参数占位符" aria-hidden="true">#</a> 1.3.4 参数占位符</h4><p>查询到的结果很好理解就是id为1的这行数据。而这里我们需要看控制台显示的SQL语句，能看到使用？进行占位。说明我们在映射配置文件中的写的 <code>#{id}</code> 最终会被？进行占位。接下来我们就聊聊映射配置文件中的参数占位符。</p><p>mybatis提供了两种参数占位符：</p><ul><li><p>#{} ：执行SQL时，会将 #{} 占位符替换为？，将来自动设置参数值。从上述例子可以看出使用#{} 底层使用的是 <code>PreparedStatement</code></p></li><li><p>${} ：拼接SQL。底层使用的是 <code>Statement</code>，会存在SQL注入问题。如下图将 映射配置文件中的 #{} 替换成 ${} 来看效果</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = ${id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行查看结果如下：</p><img src="/vuepress-java/assets/image-20210729184156019.cd195456.png" alt="image-20210729184156019" style="zoom:70%;"></li></ul><blockquote><p>==注意：==从上面两个例子可以看出，以后开发我们使用 #{} 参数占位符。</p></blockquote><h4 id="_1-3-5-parametertype使用" tabindex="-1"><a class="header-anchor" href="#_1-3-5-parametertype使用" aria-hidden="true">#</a> 1.3.5 parameterType使用</h4><p>对于有参数的mapper接口方法，我们在映射配置文件中应该配置 <code>ParameterType</code> 来指定参数类型。只不过该属性都可以省略。如下图：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = ${id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-6-sql语句中特殊字段处理" tabindex="-1"><a class="header-anchor" href="#_1-3-6-sql语句中特殊字段处理" aria-hidden="true">#</a> 1.3.6 SQL语句中特殊字段处理</h4><p>以后肯定会在SQL语句中写一下特殊字符，比如某一个字段大于某个值，如下图</p><img src="/vuepress-java/assets/image-20210729184756094.de6cde6f.png" alt="image-20210729184756094" style="zoom:80%;"><p>可以看出报错了，因为映射配置文件是xml类型的问题，而 &gt; &lt; 等这些字符在xml中有特殊含义，所以此时我们需要将这些符号进行转义，可以使用以下两种方式进行转义</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">*</span> 转义字符

  下图的 `<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>` 就是 `<span class="token operator">&lt;</span>` 的转义字符。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div> <img src="/vuepress-java/assets/image-20210729185128686.fdc7a9dd.png" alt="image-20210729185128686" style="zoom:60%;"><!-- * <![CDATA[内容]]> --><img src="/vuepress-java/assets/image-20210729185030318.37a10e3b.png" alt="image-20210729185030318" style="zoom:60%;"><h3 id="_1-4-多条件查询" tabindex="-1"><a class="header-anchor" href="#_1-4-多条件查询" aria-hidden="true">#</a> 1.4 多条件查询</h3><p><img src="/vuepress-java/assets/image-20210729203804276.f4194039.png" alt="image-20210729203804276"></p><p>我们经常会遇到如上图所示的多条件查询，将多条件查询的结果展示在下方的数据列表中。而我们做这个功能需要分析最终的SQL语句应该是什么样，思考两个问题</p><ul><li>条件表达式</li><li>如何连接</li></ul><p>条件字段 <code>企业名称</code> 和 <code>品牌名称</code> 需要进行模糊查询，所以条件应该是：</p><img src="/vuepress-java/assets/image-20210729204458815.7e76241c.png" alt="image-20210729204458815" style="zoom:70%;"><p>简单的分析后，我们来看功能实现的步骤：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">*</span> 编写接口方法
  <span class="token operator">*</span> 参数：所有查询条件
  <span class="token operator">*</span> 结果：<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span>
<span class="token operator">*</span> 在映射配置文件中编写<span class="token constant">SQL</span>语句
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>编写测试方法并执行</li></ul><h4 id="_1-4-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-4-1-编写接口方法" aria-hidden="true">#</a> 1.4.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义多条件查询的方法。</p><p>而该功能有三个参数，我们就需要考虑定义接口时，参数应该如何定义。Mybatis针对多参数有多种实现</p><ul><li><p>使用 <code>@Param(&quot;参数名称&quot;)</code> 标记每一个参数，在映射配置文件中就需要使用 <code>#{参数名称}</code> 进行占位</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCondition</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> status<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> companyName<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>将多个参数封装成一个 实体对象 ，将该实体对象作为接口的方法参数。该方式要求在映射配置文件的SQL中使用 <code>#{内容}</code> 时，里面的内容必须和实体类属性名保持一致。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCondition</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>将多个参数封装到map集合中，将map集合作为接口的方法参数。该方式要求在映射配置文件的SQL中使用 <code>#{内容}</code> 时，里面的内容必须和map集合中键的名称一致。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>List&lt;Brand&gt; selectByCondition(Map map);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h4 id="_1-4-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-4-2-编写sql语句" aria-hidden="true">#</a> 1.4.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    where status = #{status}
    and company_name like #{companyName}
    and brand_name like #{brandName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-4-3-编写测试方法" aria-hidden="true">#</a> 1.4.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理参数</span>
    companyName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> companyName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>
    brandName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> brandName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
	<span class="token comment">//方式一 ：接口方法参数使用 @Param 方式调用的方法</span>
    <span class="token comment">//List&lt;Brand&gt; brands = brandMapper.selectByCondition(status, companyName, brandName);</span>
    <span class="token comment">//方式二 ：接口方法参数是 实体类对象 方式调用的方法</span>
     <span class="token comment">//封装对象</span>
    <span class="token comment">/* Brand brand = new Brand();
        brand.setStatus(status);
        brand.setCompanyName(companyName);
        brand.setBrandName(brandName);*/</span>
    
    <span class="token comment">//List&lt;Brand&gt; brands = brandMapper.selectByCondition(brand);</span>
    
    <span class="token comment">//方式三 ：接口方法参数是 map集合对象 方式调用的方法</span>
    <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span> <span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">,</span> companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span> <span class="token punctuation">,</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectByCondition</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-4-动态sql" tabindex="-1"><a class="header-anchor" href="#_1-4-4-动态sql" aria-hidden="true">#</a> 1.4.4 动态SQL</h4><p>上述功能实现存在很大的问题。用户在输入条件时，肯定不会所有的条件都填写，这个时候我们的SQL语句就不能那样写的</p><p>例如用户只输入 当前状态 时，SQL语句就是</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token comment">#{status}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>而用户如果只输入企业名称时，SQL语句就是</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> company_name <span class="token operator">like</span> <span class="token comment">#{companName}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>而用户如果输入了 <code>当前状态</code> 和 <code>企业名称 </code> 时，SQL语句又不一样</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token comment">#{status} and company_name like #{companName}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>针对上述的需要，Mybatis对动态SQL有很强大的支撑：</p><blockquote><ul><li><p>if</p></li><li><p>choose (when, otherwise)</p></li><li><p>trim (where, set)</p></li><li><p>foreach</p></li></ul></blockquote><p>我们先学习 if 标签和 where 标签：</p><ul><li><p>if 标签：条件判断</p><ul><li>test 属性：逻辑表达式</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    where
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != &#39;&#39; <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and company_name like #{companyName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != &#39;&#39; <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and brand_name like #{brandName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如上的这种SQL语句就会根据传递的参数值进行动态的拼接。如果此时status和companyName有值那么就会值拼接这两个条件。</p><p>执行结果如下：</p><p><img src="/vuepress-java/assets/image-20210729212510291.47fcf2e8.png" alt="image-20210729212510291"></p><p>但是它也存在问题，如果此时给的参数值是</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// map.put(&quot;status&quot; , status);</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">,</span> companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span> <span class="token punctuation">,</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>拼接的SQL语句就变成了</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token operator">and</span> company_name <span class="token operator">like</span> ? <span class="token operator">and</span> brand_name <span class="token operator">like</span> ?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>而上面的语句中 where 关键后直接跟 and 关键字，这就是一条错误的SQL语句。这个就可以使用 where 标签解决</p></li><li><p>where 标签</p><ul><li>作用： <ul><li>替换where关键字</li><li>会动态的去掉第一个条件前的 and</li><li>如果所有的参数没有值则不加where关键字</li></ul></li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != &#39;&#39; <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and company_name like #{companyName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != &#39;&#39; <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and brand_name like #{brandName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：需要给每个条件前都加上 and 关键字。</p></blockquote></li></ul><h3 id="_1-5-单个条件-动态sql" tabindex="-1"><a class="header-anchor" href="#_1-5-单个条件-动态sql" aria-hidden="true">#</a> 1.5 单个条件（动态SQL）</h3><img src="/vuepress-java/assets/image-20210729213613029.ea89adae.png" alt="image-20210729213613029" style="zoom:80%;"><p>如上图所示，在查询时只能选择 <code>品牌名称</code>、<code>当前状态</code>、<code>企业名称</code> 这三个条件中的一个，但是用户到底选择哪儿一个，我们并不能确定。这种就属于单个条件的动态SQL语句。</p><p>这种需求需要使用到 <code>choose（when，otherwise）标签</code> 实现， 而 <code>choose</code> 标签类似于Java 中的switch语句。</p><p>通过一个案例来使用这些标签</p><h4 id="_1-5-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-5-1-编写接口方法" aria-hidden="true">#</a> 1.5.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义单条件查询的方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * 单条件动态查询
  * <span class="token keyword">@param</span> <span class="token parameter">brand</span>
  * <span class="token keyword">@return</span>
  */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByConditionSingle</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-5-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-5-2-编写sql语句" aria-hidden="true">#</a> 1.5.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByConditionSingle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于switch--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                status = #{status}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != &#39;&#39; <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                company_name like #{companyName}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                brand_name like #{brandName}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-5-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-5-3-编写测试方法" aria-hidden="true">#</a> 1.5.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByConditionSingle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理参数</span>
    companyName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> companyName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>
    brandName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> brandName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//brand.setStatus(status);</span>
    brand<span class="token punctuation">.</span><span class="token function">setCompanyName</span><span class="token punctuation">(</span>companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//brand.setBrandName(brandName);</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectByConditionSingle</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行测试方法结果如下：</p><img src="/vuepress-java/assets/image-20210729214548756.424de9d4.png" alt="image-20210729214548756" style="zoom:70%;"><h3 id="_1-6-添加数据" tabindex="-1"><a class="header-anchor" href="#_1-6-添加数据" aria-hidden="true">#</a> 1.6 添加数据</h3><img src="/vuepress-java/assets/image-20210729214917317.e3b5f0e4.png" alt="image-20210729214917317" style="zoom:70%;"><p>如上图是我们平时在添加数据时展示的页面，而我们在该页面输入想要的数据后添加 <code>提交</code> 按钮，就会将这些数据添加到数据库中。接下来我们就来实现添加数据的操作。</p><ul><li><p>编写接口方法</p><img src="data:image/png;base64,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" alt="image-20210729215351651" style="zoom:80%;"><p>参数：除了id之外的所有的数据。id对应的是表中主键值，而主键我们是 ==自动增长== 生成的。</p></li><li><p>编写SQL语句</p><img src="/vuepress-java/assets/image-20210729215537167.e3ac28b6.png" alt="image-20210729215537167" style="zoom:80%;"></li><li><p>编写测试方法并执行</p></li></ul><p>明确了该功能实现的步骤后，接下来我们进行具体的操作。</p><h4 id="_1-6-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-6-1-编写接口方法" aria-hidden="true">#</a> 1.6.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义添加方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token doc-comment comment">/**
   * 添加
   */</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-6-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-6-2-编写sql语句" aria-hidden="true">#</a> 1.6.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写添加数据的 <code>statement</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#{brandName}, #{companyName}, #{ordered}, #{description}, #{status});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-6-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-6-3-编写测试方法" aria-hidden="true">#</a> 1.6.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;波导手机&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;波导&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;手机中的战斗机&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ordered <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setCompanyName</span><span class="token punctuation">(</span>companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setBrandName</span><span class="token punctuation">(</span>brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setOrdered</span><span class="token punctuation">(</span>ordered<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true); //设置自动提交事务，这种情况不需要手动提交事务了</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果如下：</p><p><img src="/vuepress-java/assets/image-20210729220348255.372f0667.png" alt="image-20210729220348255"></p><h4 id="_1-6-4-添加-主键返回" tabindex="-1"><a class="header-anchor" href="#_1-6-4-添加-主键返回" aria-hidden="true">#</a> 1.6.4 添加-主键返回</h4><p>在数据添加成功后，有时候需要获取插入数据库数据的主键（主键是自增长）。</p><p>比如：添加订单和订单项，如下图就是京东上的订单</p><img src="/vuepress-java/assets/image-20210729221207962.aff70225.png" alt="image-20210729221207962" style="zoom:80%;"><p>订单数据存储在订单表中，订单项存储在订单项表中。</p><ul><li><p>添加订单数据</p><img src="/vuepress-java/assets/image-20210729221049462.10d3a434.png" alt="image-20210729221049462" style="zoom:80%;"></li><li><p>添加订单项数据，订单项中需要设置所属订单的id</p><img src="/vuepress-java/assets/image-20210729221049462.10d3a434.png" alt="image-20210729221058898" style="zoom:80%;"></li></ul><p>明白了什么时候 <code>主键返回</code> 。接下来我们简单模拟一下，在添加完数据后打印id属性值，能打印出来说明已经获取到了。</p><p>我们将上面添加品牌数据的案例中映射配置文件里 <code>statement</code> 进行修改，如下</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#{brandName}, #{companyName}, #{ordered}, #{description}, #{status});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>在 insert 标签上添加如下属性：</p><ul><li>useGeneratedKeys：是够获取自动增长的主键值。true表示获取</li><li>keyProperty ：指定将获取到的主键值封装到哪儿个属性里</li></ul></blockquote><h3 id="_1-7-修改" tabindex="-1"><a class="header-anchor" href="#_1-7-修改" aria-hidden="true">#</a> 1.7 修改</h3><img src="/vuepress-java/assets/image-20210729222642700.ab1de814.png" alt="image-20210729222642700" style="zoom:80%;"><p>如图所示是修改页面，用户在该页面书写需要修改的数据，点击 <code>提交</code> 按钮，就会将数据库中对应的数据进行修改。注意一点，如果哪儿个输入框没有输入内容，我们是将表中数据对应字段值替换为空白还是保留字段之前的值？答案肯定是保留之前的数据。</p><p>接下来我们就具体来实现</p><h4 id="_1-7-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-7-1-编写接口方法" aria-hidden="true">#</a> 1.7.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义修改方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token doc-comment comment">/**
   * 修改
   */</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>上述方法参数 Brand 就是封装了需要修改的数据，而id肯定是有数据的，这也是和添加方法的区别。</p></blockquote><h4 id="_1-7-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-7-2-编写sql语句" aria-hidden="true">#</a> 1.7.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写修改数据的 <code>statement</code>。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            brand_name = #{brandName},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            company_name = #{companyName},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordered != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            ordered = #{ordered},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            description = #{description},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><em>set</em> 标签可以用于动态包含需要更新的列，忽略其它不更新的列。</p></blockquote><h4 id="_1-7-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-7-3-编写测试方法" aria-hidden="true">#</a> 1.7.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;波导手机&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;波导&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;波导手机,手机中的战斗机&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ordered <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        brand.setCompanyName(companyName);</span>
    <span class="token comment">//        brand.setBrandName(brandName);</span>
    <span class="token comment">//        brand.setDescription(description);</span>
    <span class="token comment">//        brand.setOrdered(ordered);</span>
    brand<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行测试方法结果如下：</p><p><img src="/vuepress-java/assets/image-20210729224205522.929a18c5.png" alt="image-20210729224205522"></p><p>从结果中SQL语句可以看出，只修改了 <code>status</code> 字段值，因为我们给的数据中只给Brand实体对象的 <code>status</code> 属性设置值了。这就是 <code>set</code> 标签的作用。</p><h3 id="_1-8-删除一行数据" tabindex="-1"><a class="header-anchor" href="#_1-8-删除一行数据" aria-hidden="true">#</a> 1.8 删除一行数据</h3><p><img src="/vuepress-java/assets/image-20210729224549305.6da0380e.png" alt="image-20210729224549305"></p><p>如上图所示，每行数据后面都有一个 <code>删除</code> 按钮，当用户点击了该按钮，就会将改行数据删除掉。那我们就需要思考，这种删除是根据什么进行删除呢？是通过主键id删除，因为id是表中数据的唯一标识。</p><p>接下来就来实现该功能。</p><h4 id="_1-8-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-8-1-编写接口方法" aria-hidden="true">#</a> 1.8.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义根据id删除方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * 根据id删除
  */</span>
<span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-8-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-8-2-编写sql语句" aria-hidden="true">#</a> 1.8.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写删除一行数据的 <code>statement</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteById<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from tb_brand where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-8-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-8-3-编写测试方法" aria-hidden="true">#</a> 1.8.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行过程只要没报错，直接到数据库查询数据是否还存在。</p><h3 id="_1-9-批量删除" tabindex="-1"><a class="header-anchor" href="#_1-9-批量删除" aria-hidden="true">#</a> 1.9 批量删除</h3><img src="/vuepress-java/assets/image-20210729225713894.de0173e4.png" alt="image-20210729225713894" style="zoom:70%;"><p>如上图所示，用户可以选择多条数据，然后点击上面的 <code>删除</code> 按钮，就会删除数据库中对应的多行数据。</p><h4 id="_1-9-1-编写接口方法" tabindex="-1"><a class="header-anchor" href="#_1-9-1-编写接口方法" aria-hidden="true">#</a> 1.9.1 编写接口方法</h4><p>在 <code>BrandMapper</code> 接口中定义删除多行数据的方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * 批量删除
  */</span>
<span class="token keyword">void</span> <span class="token function">deleteByIds</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>参数是一个数组，数组中存储的是多条数据的id</p></blockquote><h4 id="_1-9-2-编写sql语句" tabindex="-1"><a class="header-anchor" href="#_1-9-2-编写sql语句" aria-hidden="true">#</a> 1.9.2 编写SQL语句</h4><p>在 <code>BrandMapper.xml</code> 映射配置文件中编写删除多条数据的 <code>statement</code>。</p><p>编写SQL时需要遍历数组来拼接SQL语句。Mybatis 提供了 <code>foreach</code> 标签供我们使用</p><p><strong>foreach 标签</strong></p><p>用来迭代任何可迭代的对象（如数组，集合）。</p><ul><li>collection 属性： <ul><li>mybatis会将数组参数，封装为一个Map集合。 <ul><li>默认：array = 数组</li><li>使用@Param注解改变map集合的默认key的名称</li></ul></li></ul></li><li>item 属性：本次迭代获取到的元素。</li><li>separator 属性：集合项迭代之间的分隔符。<code>foreach</code> 标签不会错误地添加多余的分隔符。也就是最后一次迭代不会加分隔符。</li><li>open 属性：该属性值是在拼接SQL语句之前拼接的语句，只会拼接一次</li><li>close 属性：该属性值是在拼接SQL语句拼接后拼接的语句，只会拼接一次</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteByIds<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from tb_brand where id
    in
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    ;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>假如数组中的id数据是{1,2,3}，那么拼接后的sql语句就是：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h4 id="_1-9-3-编写测试方法" tabindex="-1"><a class="header-anchor" href="#_1-9-3-编写测试方法" aria-hidden="true">#</a> 1.9.3 编写测试方法</h4><p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code> 包下的 <code>MybatisTest类中</code> 定义测试方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">deleteByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-10-mybatis参数传递" tabindex="-1"><a class="header-anchor" href="#_1-10-mybatis参数传递" aria-hidden="true">#</a> 1.10 Mybatis参数传递</h3><p>Mybatis 接口方法中可以接收各种各样的参数，如下：</p><ul><li>多个参数</li><li>单个参数：单个参数又可以是如下类型 <ul><li>POJO 类型</li><li>Map 集合类型</li><li>Collection 集合类型</li><li>List 集合类型</li><li>Array 类型</li><li>其他类型</li></ul></li></ul><h4 id="_1-10-1-多个参数" tabindex="-1"><a class="header-anchor" href="#_1-10-1-多个参数" aria-hidden="true">#</a> 1.10.1 多个参数</h4><p>如下面的代码，就是接收两个参数，而接收多个参数需要使用 <code>@Param</code> 注解，那么为什么要加该注解呢？这个问题要弄明白就必须来研究Mybatis 底层对于这些参数是如何处理的。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{username}
    	and password=#{password}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们在接口方法中定义多个参数，Mybatis 会将这些参数封装成 Map 集合对象，值就是参数值，而键在没有使用 <code>@Param</code> 注解时有以下命名规则：</p><ul><li><p>以 arg 开头 ：第一个参数就叫 arg0，第二个参数就叫 arg1，以此类推。如：</p><blockquote><p>map.put(&quot;arg0&quot;，参数值1);</p><p>map.put(&quot;arg1&quot;，参数值2);</p></blockquote></li><li><p>以 param 开头 ： 第一个参数就叫 param1，第二个参数就叫 param2，依次类推。如：</p><blockquote><p>map.put(&quot;param1&quot;，参数值1);</p><p>map.put(&quot;param2&quot;，参数值2);</p></blockquote></li></ul><p><strong>代码验证：</strong></p><ul><li><p>在 <code>UserMapper</code> 接口中定义如下方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>在 <code>UserMapper.xml</code> 映射配置文件中定义SQL</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{arg0}
    	and password=#{arg1}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{param1}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行代码结果如下</p><img src="/vuepress-java/assets/image-20210805230303461.07b68d05.png" alt="image-20210805230303461" style="zoom:80%;"><p>在映射配合文件的SQL语句中使用用 <code>arg</code> 开头的和 <code>param</code> 书写，代码的可读性会变的特别差，此时可以使用 <code>@Param</code> 注解。</p></li></ul><p>在接口方法参数上使用 <code>@Param</code> 注解，Mybatis 会将 <code>arg</code> 开头的键名替换为对应注解的属性值。</p><p><strong>代码验证：</strong></p><ul><li><p>在 <code>UserMapper</code> 接口中定义如下方法，在 <code>username</code> 参数前加上 <code>@Param</code> 注解</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Mybatis 在封装 Map 集合时，键名就会变成如下：</p><blockquote><p>map.put(&quot;username&quot;，参数值1);</p><p>map.put(&quot;arg1&quot;，参数值2);</p><p>map.put(&quot;param1&quot;，参数值1);</p><p>map.put(&quot;param2&quot;，参数值2);</p></blockquote></li><li><p>在 <code>UserMapper.xml</code> 映射配置文件中定义SQL</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{username}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行程序结果没有报错。而如果将 <code>#{}</code> 中的 <code>username</code> 还是写成 <code>arg0</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{arg0}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行程序则可以看到错误</p><p><img src="/vuepress-java/assets/image-20210805231727206.812ba92a.png" alt="image-20210805231727206"></p></li></ul><p>==结论：以后接口参数是多个时，在每个参数上都使用 <code>@Param</code> 注解。这样代码的可读性更高。==</p><h4 id="_1-10-2-单个参数" tabindex="-1"><a class="header-anchor" href="#_1-10-2-单个参数" aria-hidden="true">#</a> 1.10.2 单个参数</h4><ul><li><p>POJO 类型</p><p>直接使用。要求 <code>属性名</code> 和 <code>参数占位符名称</code> 一致</p></li><li><p>Map 集合类型</p><p>直接使用。要求 <code>map集合的键名</code> 和 <code>参数占位符名称</code> 一致</p></li><li><p>Collection 集合类型</p><p>Mybatis 会将集合封装到 map 集合中，如下：</p><blockquote><p>map.put(&quot;arg0&quot;，collection集合);</p><p>map.put(&quot;collection&quot;，collection集合;</p></blockquote><p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li><li><p>List 集合类型</p><p>Mybatis 会将集合封装到 map 集合中，如下：</p><blockquote><p>map.put(&quot;arg0&quot;，list集合);</p><p>map.put(&quot;collection&quot;，list集合);</p><p>map.put(&quot;list&quot;，list集合);</p></blockquote><p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li><li><p>Array 类型</p><p>Mybatis 会将集合封装到 map 集合中，如下：</p><blockquote><p>map.put(&quot;arg0&quot;，数组);</p><p>map.put(&quot;array&quot;，数组);</p></blockquote><p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li><li><p>其他类型</p><p>比如int类型，<code>参数占位符名称</code> 叫什么都可以。尽量做到见名知意</p></li></ul><h2 id="_2-注解实现crud" tabindex="-1"><a class="header-anchor" href="#_2-注解实现crud" aria-hidden="true">#</a> 2，注解实现CRUD</h2><p>使用注解开发会比配置文件开发更加方便。如下就是使用注解进行开发</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;select * from tb_user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>==注意：==</p><ul><li>注解是用来替换映射配置文件方式配置的，所以使用了注解，就不需要再映射配置文件中书写对应的 <code>statement</code></li></ul></blockquote><p>Mybatis 针对 CURD 操作都提供了对应的注解，已经做到见名知意。如下：</p><ul><li>查询 ：@Select</li><li>添加 ：@Insert</li><li>修改 ：@Update</li><li>删除 ：@Delete</li></ul><p>接下来我们做一个案例来使用 Mybatis 的注解开发</p><p><strong>代码实现：</strong></p><ul><li><p>将之前案例中 <code>UserMapper.xml</code> 中的 根据id查询数据 的 <code>statement</code> 注释掉</p><img src="/vuepress-java/assets/image-20210805235229938.4567c792.png" alt="image-20210805235229938" style="zoom:70%;"></li><li><p>在 <code>UserMapper</code> 接口的 <code>selectById</code> 方法上添加注解</p><img src="/vuepress-java/assets/image-20210805235405070.86f19fbd.png" alt="image-20210805235405070" style="zoom:70%;"></li><li><p>运行测试程序也能正常查询到数据</p></li></ul><p>我们课程上只演示这一个查询的注解开发，其他的同学们下来可以自己实现，都是比较简单。</p><p>==注意：==在官方文档中 <code>入门</code> 中有这样的一段话：</p><p><img src="/vuepress-java/assets/image-20210805234302849.b664d62e.png" alt="image-20210805234302849"></p><p>所以，==注解完成简单功能，配置文件完成复杂功能。==</p><p>而我们之前写的动态 SQL 就是复杂的功能，如果用注解使用的话，就需要使用到 Mybatis 提供的SQL构建器来完成，而对应的代码如下：</p><img src="/vuepress-java/assets/image-20210805234842497.422f17d9.png" alt="image-20210805234842497" style="zoom:70%;"><p>上述代码将java代码和SQL语句融到了一块，使得代码的可读性大幅度降低。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">作者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2279345175@qq.com">橘橙天下</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vuepress-java/assets/app.fe102d59.js" defer></script>
  </body>
</html>
